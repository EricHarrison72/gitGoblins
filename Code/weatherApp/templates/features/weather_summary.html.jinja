{% extends 'base.html.jinja' %}
{% import 'helpers/selectors.html.jinja' as selectors %}
{% import 'helpers/data_display.html.jinja' as data_display %}
{% import 'helpers/icon_display.html.jinja' as icon_display %}

{% block title %}
  Weather Summary
{% endblock %}

{% block header %}
  Weather Summary
{% endblock %}

{% block content %}

<div class="centered-content">
  <div class="weather-summary-grid">

    <div id="all-except-weather-details"> <!-- grid item -->

      <div class="table-container">
        <table class='select-table' style="display:flex;">
          <tr>
            <th>Location</th>
            <th>Date</th>
          </tr>
          <tr>
            <td>{{ selectors.select_single_location( url_args['city_name']) }}</td>
            <td>{{ selectors.select_date('', url_args['date']) }}</td>
            <td>
              <button onclick="reloadPageWithArgs(`city_name=${getCityFromSelection()}&date=${getDateFromSelection()}`)" class="dropdown-style">
                Submit
              </button>
            </td>
          </tr>
        </table>
      </div>

      {{ data_display.weather_overview(weather_dict, weather_icon, rain_prediction)}}

      <div class="graph-container">
        {# one of these is hidden and one is shown at all times #}
        <div id="light-mode-graph">
            {{ graph_html.light }}
        </div>
        <div id="dark-mode-graph">
            {{ graph_html.dark }}
        </div>

        <script>
            updateGraph(); // (called here for initial page load)
        </script>
      </div>

    </div>

    <div id="weather-details"> <!-- grid item -->
      <div class="table-container">
        {{ data_display.weather_details_table( weather_dict) }}
      </div> 
    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/submit.js') }}"></script>
{% endblock %}

